# configuration

rv stores its configuration in `~/.rv/config.toml`. created automatically by `rv init`.

## config file

full example of `~/.rv/config.toml`:

```toml
[connection]
host = "rivanna"
user = "abc1de"
hostname = "rivanna.hpc.virginia.edu"

[defaults]
account = "mygroup"
gpu_type = "a6000"
time = "2:59:00"
partition = "gpu-a6000"
ai_naming = true
ai_api_key = "sk-..."

[paths]
scratch = "/scratch/abc1de"
home = "/home/abc1de"

[notifications]
enabled = true
email = "abc1de@virginia.edu"
token = "..."  # auto-generated by rv init

[scratch_keepalive]
enabled = true  # default: true
```

## defaults

default values used when flags are not specified on the command line:

| key       | description                             | example   |
| --------- | --------------------------------------- | --------- |
| account   | Slurm account (allocation group)        | mygroup   |
| gpu_type  | default GPU type when --type is omitted | a6000     |
| time      | default walltime                        | 2:59:00   |
| partition | default Slurm partition                 | gpu-a6000 |

## notifications

rv can email you when jobs complete or fail. notifications are sent to your @virginia.edu address via HMAC-signed webhooks.

enable during `rv init` or set manually in config.toml:

```toml
[notifications]
enabled = true
email = "abc1de@virginia.edu"
```

notification events: COMPLETED, FAILED, TIMEOUT, RESUBMITTED (checkpoint-restart).

## ai naming

rv can auto-generate descriptive job names using an AI model. set your API key in config.toml — rv auto-detects the provider from the key prefix:

| key prefix | provider  |
| ---------- | --------- |
| sk-ant-    | Anthropic |
| sk-        | OpenAI    |

```toml
[defaults]
ai_naming = true
ai_api_key = "sk-ant-..."
```

## environment variables

use `rv env` to manage variables that are injected into every job. these are stored remotely in env files and loaded at job start. useful for API keys, model paths, and other secrets.

```bash
rv env set HF_TOKEN hf_abc123...
rv env list
rv env rm HF_TOKEN
```

rv also auto-sets these variables in every job: OMP_NUM_THREADS, TOKENIZERS_PARALLELISM, HF_HOME, VLLM_CACHE_DIR, RV_CHECKPOINT_DIR.

## scratch keepalive

Rivanna's scratch filesystem has a 90-day purge policy — files not accessed in 90 days are automatically deleted. this would destroy your venv, environment variables, and caches.

rv automatically prevents this by touching all files under `/scratch/user/.rv/` and cache directories once per day (on the first rv command of the day). this runs in the background and adds no latency to your commands.

enabled by default. to disable:

```toml
[scratch_keepalive]
enabled = false
```

## paths

rv organizes remote files under your scratch directory:

| path                              | purpose                                            |
| --------------------------------- | -------------------------------------------------- |
| /scratch/user/.rv/                | rv home directory                                  |
| /scratch/user/.rv/logs/           | job output logs                                    |
| /scratch/user/.rv/env/            | environment variable files                         |
| /scratch/user/.rv/venv/           | persistent Python venv (torch + ray pre-installed) |
| /scratch/user/rv-workspaces/      | synced project workspaces                          |
| /scratch/user/.cache/huggingface/ | HuggingFace model cache (HF_HOME)                  |
| /scratch/user/.cache/uv/          | uv package cache                                   |

scratch storage is high-performance (Weka filesystem, ~1.5 GB/s write). files are [not backed up](https://www.rc.virginia.edu/userinfo/storage/non-sensitive-data/#scratch) and subject to a 90-day purge policy.
